<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NaviMaps - Interactive Navigation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            height: 100vh;
            overflow: hidden;
            background: #1a1a1a;
        }

        .app-container {
            display: flex;
            height: 100vh;
            position: relative;
        }

        .sidebar {
            width: 350px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            flex-direction: column;
            box-shadow: 2px 0 20px rgba(0,0,0,0.3);
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .header {
            padding: 20px;
            background: rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-container {
            position: relative;
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 12px 40px 12px 15px;
            border: none;
            border-radius: 25px;
            font-size: 14px;
            background: rgba(255,255,255,0.9);
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            background: white;
            box-shadow: 0 0 20px rgba(255,255,255,0.3);
        }

        .search-btn {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: #4CAF50;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            cursor: pointer;
            color: white;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            background: #45a049;
            transform: translateY(-50%) scale(1.1);
        }

        .route-inputs {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .route-input {
            padding: 10px 15px;
            border: none;
            border-radius: 20px;
            font-size: 13px;
            background: rgba(255,255,255,0.85);
            transition: all 0.3s ease;
        }

        .route-input:focus {
            outline: none;
            background: white;
            box-shadow: 0 0 15px rgba(255,255,255,0.3);
        }

        .transport-modes {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: space-around;
        }

        .transport-btn {
            flex: 1;
            padding: 12px 8px;
            border: none;
            border-radius: 15px;
            background: rgba(255,255,255,0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
            text-align: center;
        }

        .transport-btn.active {
            background: #4CAF50;
            box-shadow: 0 5px 15px rgba(76,175,80,0.4);
            transform: translateY(-2px);
        }

        .transport-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-1px);
        }

        .features {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .feature-section {
            margin-bottom: 25px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 15px;
            backdrop-filter: blur(10px);
        }

        .feature-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #fff;
        }

        .toggle-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .toggle {
            position: relative;
            width: 50px;
            height: 25px;
            background: rgba(255,255,255,0.3);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle.active {
            background: #4CAF50;
        }

        .toggle::before {
            content: '';
            position: absolute;
            width: 21px;
            height: 21px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .toggle.active::before {
            transform: translateX(25px);
        }

        .map-container {
            flex: 1;
            position: relative;
            background: linear-gradient(45deg, #2c3e50, #3498db);
            overflow: hidden;
        }

        .map {
            width: 100%;
            height: 100%;
            position: relative;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(120, 219, 255, 0.3) 0%, transparent 50%),
                linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .map-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .street {
            position: absolute;
            background: rgba(255,255,255,0.8);
            border-radius: 2px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .street.traffic-heavy {
            background: #ff4444;
            animation: pulse 2s infinite;
        }

        .street.traffic-medium {
            background: #ffaa44;
        }

        .street.traffic-light {
            background: #44ff44;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        .route-line {
            position: absolute;
            background: #2196F3;
            height: 4px;
            border-radius: 2px;
            z-index: 100;
            animation: routeAnimation 3s ease-in-out infinite;
            box-shadow: 0 0 10px rgba(33,150,243,0.5);
        }

        @keyframes routeAnimation {
            0%, 100% { box-shadow: 0 0 10px rgba(33,150,243,0.5); }
            50% { box-shadow: 0 0 20px rgba(33,150,243,0.8); }
        }

        .marker {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #ff4444;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            z-index: 200;
            animation: markerBounce 2s ease-in-out infinite;
            cursor: pointer;
        }

        @keyframes markerBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .marker.start {
            background: #4CAF50;
        }

        .marker.end {
            background: #ff4444;
        }

        .controls {
            position: absolute;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            background: white;
            color: #333;
            cursor: pointer;
            font-size: 18px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .navigation-panel {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 20px 30px;
            border-radius: 25px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
        }

        .navigation-panel.active {
            display: block;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from { transform: translateX(-50%) translateY(-100%); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }

        .nav-instruction {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .nav-distance {
            font-size: 14px;
            color: #666;
        }

        .traffic-legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            font-size: 12px;
        }

        .legend-color {
            width: 20px;
            height: 4px;
            border-radius: 2px;
        }

        .mobile-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 2000;
            background: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 0 3px 15px rgba(0,0,0,0.2);
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                height: 100vh;
                z-index: 2000;
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .mobile-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .map-container {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <button class="mobile-toggle" onclick="toggleSidebar()">☰</button>
        
        <div class="sidebar" id="sidebar">
            <div class="header">
                <div class="logo">
                    🗺️ NaviMaps
                </div>
                
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Search places..." id="searchInput">
                    <button class="search-btn" onclick="search()">🔍</button>
                </div>
                
                <div class="route-inputs">
                    <input type="text" class="route-input" placeholder="From: Your location" id="fromInput" value="Current Location">
                    <input type="text" class="route-input" placeholder="To: Choose destination" id="toInput">
                </div>
                
                <div class="transport-modes">
                    <button class="transport-btn active" data-mode="car" onclick="selectTransport('car')">🚗<br>Car</button>
                    <button class="transport-btn" data-mode="bike" onclick="selectTransport('bike')">🚴<br>Bike</button>
                    <button class="transport-btn" data-mode="walk" onclick="selectTransport('walk')">🚶<br>Walk</button>
                </div>
            </div>
            
            <div class="features">
                <div class="feature-section">
                    <div class="feature-title">Traffic Information</div>
                    <div class="toggle-container">
                        <span>Live Traffic</span>
                        <div class="toggle active" onclick="toggleFeature(this)" data-feature="traffic"></div>
                    </div>
                    <div class="toggle-container">
                        <span>Traffic Alerts</span>
                        <div class="toggle active" onclick="toggleFeature(this)" data-feature="alerts"></div>
                    </div>
                </div>
                
                <div class="feature-section">
                    <div class="feature-title">Map Layers</div>
                    <div class="toggle-container">
                        <span>Satellite View</span>
                        <div class="toggle" onclick="toggleFeature(this)" data-feature="satellite"></div>
                    </div>
                    <div class="toggle-container">
                        <span>Street View</span>
                        <div class="toggle active" onclick="toggleFeature(this)" data-feature="street"></div>
                    </div>
                    <div class="toggle-container">
                        <span>3D Buildings</span>
                        <div class="toggle" onclick="toggleFeature(this)" data-feature="3d"></div>
                    </div>
                </div>
                
                <div class="feature-section">
                    <div class="feature-title">Points of Interest</div>
                    <div class="toggle-container">
                        <span>Gas Stations</span>
                        <div class="toggle" onclick="toggleFeature(this)" data-feature="gas"></div>
                    </div>
                    <div class="toggle-container">
                        <span>Restaurants</span>
                        <div class="toggle" onclick="toggleFeature(this)" data-feature="restaurants"></div>
                    </div>
                    <div class="toggle-container">
                        <span>Hotels</span>
                        <div class="toggle" onclick="toggleFeature(this)" data-feature="hotels"></div>
                    </div>
                </div>
                
                <div class="feature-section">
                    <div class="feature-title">Navigation</div>
                    <div class="toggle-container">
                        <span>Voice Guidance</span>
                        <div class="toggle active" onclick="toggleFeature(this)" data-feature="voice"></div>
                    </div>
                    <div class="toggle-container">
                        <span>Avoid Tolls</span>
                        <div class="toggle" onclick="toggleFeature(this)" data-feature="tolls"></div>
                    </div>
                    <div class="toggle-container">
                        <span>Avoid Highways</span>
                        <div class="toggle" onclick="toggleFeature(this)" data-feature="highways"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="map-container">
            <div class="map" id="map">
                <div class="map-overlay" id="mapOverlay"></div>
            </div>
            
            <div class="navigation-panel" id="navigationPanel">
                <div class="nav-instruction" id="navInstruction">Turn right onto Main Street</div>
                <div class="nav-distance" id="navDistance">In 500 meters</div>
            </div>
            
            <div class="traffic-legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #44ff44;"></div>
                    <span>Light Traffic</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ffaa44;"></div>
                    <span>Medium Traffic</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ff4444;"></div>
                    <span>Heavy Traffic</span>
                </div>
            </div>
            
            <div class="controls">
                <button class="control-btn" onclick="zoomIn()" title="Zoom In">+</button>
                <button class="control-btn" onclick="zoomOut()" title="Zoom Out">−</button>
                <button class="control-btn" onclick="centerLocation()" title="My Location">📍</button>
                <button class="control-btn" onclick="startNavigation()" title="Start Navigation">🧭</button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentTransportMode = 'car';
        let isNavigating = false;
        let navigationInterval;
        let zoomLevel = 1;
        let features = {
            traffic: true,
            alerts: true,
            satellite: false,
            street: true,
            '3d': false,
            gas: false,
            restaurants: false,
            hotels: false,
            voice: true,
            tolls: false,
            highways: false
        };

        // Initialize the map
        function initMap() {
            const mapOverlay = document.getElementById('mapOverlay');
            
            // Create street network with traffic data
            createStreetNetwork(mapOverlay);
            createPOIMarkers(mapOverlay);
            
            // Simulate real-time traffic updates
            setInterval(updateTraffic, 5000);
        }

        function createStreetNetwork(container) {
            const streets = [
                // Horizontal streets
                { x: 10, y: 20, width: 200, height: 4, traffic: 'light' },
                { x: 250, y: 20, width: 150, height: 4, traffic: 'heavy' },
                { x: 10, y: 80, width: 180, height: 4, traffic: 'medium' },
                { x: 220, y: 80, width: 200, height: 4, traffic: 'light' },
                { x: 50, y: 140, width: 250, height: 4, traffic: 'medium' },
                { x: 10, y: 200, width: 300, height: 4, traffic: 'heavy' },
                { x: 80, y: 260, width: 200, height: 4, traffic: 'light' },
                
                // Vertical streets
                { x: 60, y: 10, width: 4, height: 150, traffic: 'medium' },
                { x: 150, y: 30, width: 4, height: 180, traffic: 'light' },
                { x: 240, y: 15, width: 4, height: 200, traffic: 'heavy' },
                { x: 320, y: 40, width: 4, height: 160, traffic: 'medium' },
                { x: 100, y: 120, width: 4, height: 120, traffic: 'light' },
            ];

            streets.forEach(street => {
                const streetEl = document.createElement('div');
                streetEl.className = `street traffic-${street.traffic}`;
                streetEl.style.left = street.x + 'px';
                streetEl.style.top = street.y + 'px';
                streetEl.style.width = street.width + 'px';
                streetEl.style.height = street.height + 'px';
                container.appendChild(streetEl);
            });
        }

        function createPOIMarkers(container) {
            const markers = [
                { x: 100, y: 50, type: 'start', label: 'Start' },
                { x: 300, y: 180, type: 'end', label: 'Destination' },
                { x: 200, y: 120, type: 'poi', label: 'Restaurant' },
                { x: 150, y: 90, type: 'poi', label: 'Gas Station' }
            ];

            markers.forEach(marker => {
                const markerEl = document.createElement('div');
                markerEl.className = `marker ${marker.type}`;
                markerEl.style.left = (marker.x - 15) + 'px';
                markerEl.style.top = (marker.y - 15) + 'px';
                markerEl.title = marker.label;
                markerEl.onclick = () => showMarkerInfo(marker);
                container.appendChild(markerEl);
            });

            // Create route line
            if (features.street) {
                createRouteLine(container);
            }
        }

        function createRouteLine(container) {
            const routeSegments = [
                { x: 115, y: 52, width: 140, height: 4, rotation: 0 },
                { x: 240, y: 52, width: 4, height: 28, rotation: 90 },
                { x: 242, y: 78, width: 60, height: 4, rotation: 0 },
                { x: 300, y: 80, width: 4, height: 100, rotation: 90 }
            ];

            routeSegments.forEach(segment => {
                const routeEl = document.createElement('div');
                routeEl.className = 'route-line';
                routeEl.style.left = segment.x + 'px';
                routeEl.style.top = segment.y + 'px';
                routeEl.style.width = segment.width + 'px';
                routeEl.style.height = segment.height + 'px';
                if (segment.rotation) {
                    routeEl.style.transform = `rotate(${segment.rotation}deg)`;
                }
                container.appendChild(routeEl);
            });
        }

        function updateTraffic() {
            if (!features.traffic) return;
            
            const streets = document.querySelectorAll('.street');
            streets.forEach(street => {
                const currentClass = street.className;
                const trafficTypes = ['light', 'medium', 'heavy'];
                const randomTraffic = trafficTypes[Math.floor(Math.random() * trafficTypes.length)];
                
                // 20% chance to change traffic
                if (Math.random() < 0.2) {
                    street.className = `street traffic-${randomTraffic}`;
                }
            });
        }

        function selectTransport(mode) {
            currentTransportMode = mode;
            document.querySelectorAll('.transport-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
            
            // Update route visualization based on transport mode
            updateRouteForMode(mode);
        }

        function updateRouteForMode(mode) {
            const routeLines = document.querySelectorAll('.route-line');
            routeLines.forEach(line => {
                switch(mode) {
                    case 'car':
                        line.style.background = '#2196F3';
                        line.style.height = '4px';
                        break;
                    case 'bike':
                        line.style.background = '#FF9800';
                        line.style.height = '3px';
                        break;
                    case 'walk':
                        line.style.background = '#4CAF50';
                        line.style.height = '2px';
                        break;
                }
            });
        }

        function toggleFeature(toggle) {
            const feature = toggle.dataset.feature;
            features[feature] = !features[feature];
            toggle.classList.toggle('active');
            
            // Apply feature changes
            applyFeatureChanges(feature, features[feature]);
        }

        function applyFeatureChanges(feature, enabled) {
            const mapContainer = document.querySelector('.map');
            
            switch(feature) {
                case 'traffic':
                    const streets = document.querySelectorAll('.street');
                    streets.forEach(street => {
                        if (enabled) {
                            street.style.display = 'block';
                        } else {
                            street.style.background = 'rgba(255,255,255,0.8)';
                            street.classList.remove('traffic-heavy', 'traffic-medium', 'traffic-light');
                        }
                    });
                    break;
                    
                case 'satellite':
                    if (enabled) {
                        mapContainer.style.background = 'url("data:image/svg+xml,%3Csvg width="100" height="100" xmlns="http://www.w3.org/2000/svg"%3E%3Cdefs%3E%3Cpattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"%3E%3Cpath d="M 10 0 L 0 0 0 10" fill="none" stroke="%23333" stroke-width="0.5"/%3E%3C/pattern%3E%3C/defs%3E%3Crect width="100" height="100" fill="%234a5568"/%3E%3Crect width="100" height="100" fill="url(%23grid)"/%3E%3C/svg%3E")';
                    } else {
                        mapContainer.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                    }
                    break;
                    
                case 'voice':
                    if (enabled && isNavigating) {
                        showNotification('Voice guidance enabled');
                    }
                    break;
            }
        }

        function search() {
            const searchInput = document.getElementById('searchInput');
            const query = searchInput.value.trim();
            
            if (query) {
                showNotification(`Searching for "${query}"...`);
                
                // Simulate search results
                setTimeout(() => {
                    document.getElementById('toInput').value = query;
                    showNotification(`Found: ${query}`);
                }, 1000);
            }
        }

        function startNavigation() {
            const fromInput = document.getElementById('fromInput').value;
            const toInput = document.getElementById('toInput').value;
            
            if (!toInput.trim()) {
                showNotification('Please enter a destination');
                return;
            }
            
            isNavigating = !isNavigating;
            const navPanel = document.getElementById('navigationPanel');
            
            if (isNavigating) {
                navPanel.classList.add('active');
                showNotification('Navigation started');
                
                // Simulate navigation instructions
                const instructions = [
                    { instruction: 'Head north on Main Street', distance: 'for 200 meters' },
                    { instruction: 'Turn right onto Oak Avenue', distance: 'in 500 meters' },
                    { instruction: 'Continue straight', distance: 'for 1.2 km' },
                    { instruction: 'Turn left onto Park Road', distance: 'in 300 meters' },
                    { instruction: 'Destination on your right', distance: 'in 100 meters' }
                ];
                
                let currentInstruction = 0;
                navigationInterval = setInterval(() => {
                    if (currentInstruction < instructions.length) {
                        document.getElementById('navInstruction').textContent = instructions[currentInstruction].instruction;
                        document.getElementById('navDistance').textContent = instructions[currentInstruction].distance;
                        currentInstruction++;
                        
                        if (features.voice) {
                            // Simulate voice guidance
                            showNotification('🔊 ' + instructions[currentInstruction - 1].instruction);
                        }
                    } else {
                        clearInterval(navigationInterval);
                        showNotification('You have arrived at your destination!');
                        stopNavigation();
                    }
                }, 3000);
            } else {
                stopNavigation();
            }
        }

        function stopNavigation() {
            isNavigating = false;
            clearInterval(navigationInterval);
            document.getElementById('navigationPanel').classList.remove('active');
            showNotification('Navigation stopped');
        }

        function zoomIn() {
            zoomLevel = Math.min(zoomLevel + 0.2, 3);
            applyZoom();
        }

        function zoomOut() {
            zoomLevel = Math.max(zoomLevel - 0.2, 0.5);
            applyZoom();
        }

        function applyZoom() {
            const mapOverlay = document.getElementById('mapOverlay');
            mapOverlay.style.transform = `scale(${zoomLevel})`;
            mapOverlay.style.transformOrigin = 'center center';
        }

        function centerLocation() {
            showNotification('Centered on your location');
            // Reset zoom and position
            zoomLevel = 1;
            applyZoom();
        }

        function showMarkerInfo(marker) {
            showNotification(`📍 ${marker.label}`);
        }

        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: #333;
                color: white;
                padding: 10px 20px;
                border-radius: 25px;
                z-index: 10000;
                font-size: 14px;
                box-shadow: 0 5px 25px rgba(0,0,0,0.3);
                animation: slideInDown 0.3s ease;
            `;
            notification.textContent = message;
            
            // Add animation keyframes if not exists
            if (!document.querySelector('#notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes slideInDown {
                        from { transform: translateX(-50%) translateY(-100%); opacity: 0; }
                        to { transform: translateX(-50%) translateY(0); opacity: 1; }
                    }
                    @keyframes slideOutUp {
                        from { transform: translateX(-50%) translateY(0); opacity: 1; }
                        to { transform: translateX(-50%) translateY(-100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
            
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOutUp 0.3s ease';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // Route calculation and display
        function calculateRoute() {
            const fromInput = document.getElementById('fromInput').value;
            const toInput = document.getElementById('toInput').value;
            
            if (!fromInput.trim() || !toInput.trim()) {
                showNotification('Please enter both start and destination locations');
                return;
            }
            
            showNotification('Calculating best route...');
            
            // Simulate route calculation
            setTimeout(() => {
                const routeInfo = {
                    distance: '5.2 km',
                    duration: currentTransportMode === 'car' ? '12 min' : 
                             currentTransportMode === 'bike' ? '18 min' : '45 min',
                    traffic: 'Light traffic on route'
                };
                
                displayRouteInfo(routeInfo);
                updateRouteVisualization();
            }, 2000);
        }

        function displayRouteInfo(routeInfo) {
            const routeDisplay = document.createElement('div');
            routeDisplay.style.cssText = `
                position: absolute;
                bottom: 100px;
                right: 30px;
                background: white;
                padding: 20px;
                border-radius: 15px;
                box-shadow: 0 5px 25px rgba(0,0,0,0.2);
                z-index: 1000;
                min-width: 200px;
            `;
            
            routeDisplay.innerHTML = `
                <h3 style="margin: 0 0 10px 0; color: #333; font-size: 16px;">Route Information</h3>
                <p style="margin: 5px 0; color: #666; font-size: 14px;">📏 Distance: ${routeInfo.distance}</p>
                <p style="margin: 5px 0; color: #666; font-size: 14px;">⏱️ Duration: ${routeInfo.duration}</p>
                <p style="margin: 5px 0; color: #666; font-size: 14px;">🚦 ${routeInfo.traffic}</p>
                <button onclick="this.parentNode.remove()" style="
                    position: absolute;
                    top: 10px;
                    right: 10px;
                    background: none;
                    border: none;
                    font-size: 18px;
                    cursor: pointer;
                    color: #999;
                ">×</button>
            `;
            
            // Remove existing route info
            const existing = document.querySelector('.route-info');
            if (existing) existing.remove();
            
            routeDisplay.className = 'route-info';
            document.querySelector('.map-container').appendChild(routeDisplay);
        }

        function updateRouteVisualization() {
            // Remove existing route
            document.querySelectorAll('.route-line').forEach(el => el.remove());
            
            // Create new route based on current settings
            const mapOverlay = document.getElementById('mapOverlay');
            createRouteLine(mapOverlay);
        }

        // Real-time location simulation
        function simulateLocationUpdates() {
            if (!isNavigating) return;
            
            // Simulate GPS updates every 2 seconds
            setInterval(() => {
                if (isNavigating) {
                    const currentLocationMarker = document.querySelector('.marker.start');
                    if (currentLocationMarker) {
                        // Simulate movement along route
                        const currentX = parseInt(currentLocationMarker.style.left);
                        const currentY = parseInt(currentLocationMarker.style.top);
                        
                        // Move marker slightly along route
                        currentLocationMarker.style.left = (currentX + Math.random() * 4 - 2) + 'px';
                        currentLocationMarker.style.top = (currentY + Math.random() * 4 - 2) + 'px';
                    }
                }
            }, 2000);
        }

        // Traffic incidents simulation
        function generateTrafficIncidents() {
            const incidents = [
                'Road construction on Oak Avenue',
                'Accident reported on Main Street',
                'Heavy traffic due to event',
                'Lane closure on Highway 101',
                'Traffic signal malfunction'
            ];
            
            setInterval(() => {
                if (features.alerts && Math.random() < 0.3) {
                    const randomIncident = incidents[Math.floor(Math.random() * incidents.length)];
                    showNotification('🚨 ' + randomIncident);
                }
            }, 15000);
        }

        // Weather integration simulation
        function updateWeatherConditions() {
            const weatherConditions = [
                { condition: 'Clear', icon: '☀️', impact: 'Normal driving conditions' },
                { condition: 'Rain', icon: '🌧️', impact: 'Reduced visibility, drive carefully' },
                { condition: 'Snow', icon: '❄️', impact: 'Icy roads, increased travel time' },
                { condition: 'Fog', icon: '🌫️', impact: 'Poor visibility conditions' }
            ];
            
            const randomWeather = weatherConditions[Math.floor(Math.random() * weatherConditions.length)];
            
            // Create weather widget
            let weatherWidget = document.querySelector('.weather-widget');
            if (!weatherWidget) {
                weatherWidget = document.createElement('div');
                weatherWidget.className = 'weather-widget';
                weatherWidget.style.cssText = `
                    position: absolute;
                    top: 100px;
                    right: 20px;
                    background: rgba(255,255,255,0.95);
                    padding: 15px;
                    border-radius: 10px;
                    box-shadow: 0 3px 15px rgba(0,0,0,0.1);
                    z-index: 1000;
                    font-size: 14px;
                    backdrop-filter: blur(10px);
                `;
                document.querySelector('.map-container').appendChild(weatherWidget);
            }
            
            weatherWidget.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 20px;">${randomWeather.icon}</span>
                    <div>
                        <div style="font-weight: bold; color: #333;">${randomWeather.condition}</div>
                        <div style="color: #666; font-size: 12px;">${randomWeather.impact}</div>
                    </div>
                </div>
            `;
        }

        // Points of Interest management
        function addPOI(type, x, y, label) {
            const mapOverlay = document.getElementById('mapOverlay');
            const poi = document.createElement('div');
            
            const poiIcons = {
                restaurant: '🍽️',
                gas: '⛽',
                hotel: '🏨',
                hospital: '🏥',
                shop: '🛍️',
                park: '🌳'
            };
            
            poi.style.cssText = `
                position: absolute;
                left: ${x}px;
                top: ${y}px;
                width: 25px;
                height: 25px;
                background: white;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 14px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                cursor: pointer;
                z-index: 150;
                transition: all 0.3s ease;
            `;
            
            poi.innerHTML = poiIcons[type] || '📍';
            poi.title = label;
            poi.onclick = () => showPOIDetails(type, label, x, y);
            
            poi.addEventListener('mouseenter', () => {
                poi.style.transform = 'scale(1.2)';
                poi.style.zIndex = '200';
            });
            
            poi.addEventListener('mouseleave', () => {
                poi.style.transform = 'scale(1)';
                poi.style.zIndex = '150';
            });
            
            mapOverlay.appendChild(poi);
        }

        function showPOIDetails(type, label, x, y) {
            const details = document.createElement('div');
            details.style.cssText = `
                position: absolute;
                left: ${x + 30}px;
                top: ${y - 20}px;
                background: white;
                padding: 15px;
                border-radius: 10px;
                box-shadow: 0 5px 20px rgba(0,0,0,0.3);
                z-index: 1000;
                min-width: 200px;
                max-width: 300px;
            `;
            
            const poiInfo = {
                restaurant: { rating: '4.5⭐', hours: 'Open until 10 PM', phone: '+1 234-567-8900' },
                gas: { price: '$3.45/gal', hours: '24/7', services: 'Car wash available' },
                hotel: { rating: '4.2⭐', price: '$120/night', amenities: 'Pool, WiFi, Parking' }
            };
            
            const info = poiInfo[type] || { rating: '4.0⭐', hours: 'Open now' };
            
            details.innerHTML = `
                <div style="font-weight: bold; color: #333; margin-bottom: 10px; font-size: 16px;">${label}</div>
                ${Object.entries(info).map(([key, value]) => 
                    `<div style="margin: 5px 0; color: #666; font-size: 14px;">${key}: ${value}</div>`
                ).join('')}
                <div style="margin-top: 10px; display: flex; gap: 10px;">
                    <button onclick="addToRoute('${label}')" style="
                        background: #4CAF50;
                        color: white;
                        border: none;
                        padding: 8px 15px;
                        border-radius: 20px;
                        cursor: pointer;
                        font-size: 12px;
                    ">Add to Route</button>
                    <button onclick="this.parentNode.parentNode.remove()" style="
                        background: #f44336;
                        color: white;
                        border: none;
                        padding: 8px 15px;
                        border-radius: 20px;
                        cursor: pointer;
                        font-size: 12px;
                    ">Close</button>
                </div>
            `;
            
            // Remove existing POI details
            document.querySelectorAll('.poi-details').forEach(el => el.remove());
            details.className = 'poi-details';
            
            document.getElementById('mapOverlay').appendChild(details);
        }

        function addToRoute(poiLabel) {
            document.getElementById('toInput').value = poiLabel;
            showNotification(`Added ${poiLabel} to route`);
            document.querySelectorAll('.poi-details').forEach(el => el.remove());
        }

        // Initialize everything when page loads
        window.addEventListener('load', () => {
            initMap();
            simulateLocationUpdates();
            generateTrafficIncidents();
            updateWeatherConditions();
            
            // Add some sample POIs
            addPOI('restaurant', 180, 95, 'Pizza Palace');
            addPOI('gas', 280, 45, 'Shell Station');
            addPOI('hotel', 340, 160, 'Grand Hotel');
            addPOI('hospital', 120, 180, 'City Hospital');
            
            // Update weather every 30 seconds
            setInterval(updateWeatherConditions, 30000);
            
            // Auto-calculate route when inputs change
            document.getElementById('toInput').addEventListener('input', () => {
                if (document.getElementById('toInput').value.trim()) {
                    setTimeout(calculateRoute, 1000);
                }
            });
            
            // Enter key support for search
            document.getElementById('searchInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    search();
                }
            });
        });
    </script>
</body>
</html>